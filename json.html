<html>
    <head>
    </head>
	<body>
		<h2>JSON object creation in Javascript</h2>
		<p id="demo"></p>
		<div id="result"></div>
		<script type="text/javascript"> 
			
			var session = {
				  'screens': [],
				  'state': true
				};
				
				session.screens.push({ 'name': 'screenA', 'width': 450, 'height': 250 });
				session.screens.push({ 'name': 'screenB', 'width': 650, 'height': 350 });
				session.screens.push({ 'name': 'screenC', 'width': 750, 'height': 120 });
				session.screens.push({ 'name': 'screenD', 'width': 250, 'height': 60 });
				session.screens.push({ 'name': 'screenE', 'width': 390, 'height': 120 });
				session.screens.push({ 'name': 'screenF', 'width': 1240, 'height': 650 });

			var text = '{"employees":['+
				'{"firstname":"Dheeraj", "lastname":"Jain"},'+
				'{"firstname":"Rahul","lastname":"Panday"},'+
				'{"firstname":"Pankaj","lastname":"Tandon"}]}';
			
			var obj = JSON.parse(text);
			document.getElementById("demo").innerHTML = obj.employees[1].firstname+" "+obj.employees[2].lastname;
			
			if(typeof(Storage) != "undefined"){
			
				var UrlVisited = ["google", "yahoo","gmail"];
				var str = JSON.stringify(UrlVisited);
				
				localStorage.setItem("URLsVisited",str);
				document.getElementById("result").innerHTML = localStorage.getItem("URLsVisited");
				
				var stringifiedSession = JSON.stringify(UrlVisited);
				localStorage.setItem('session', stringifiedSession);
				alert(stringifiedSession);
				
				var obj1 = JSON.parse(localStorage.getItem('session'));
				//alert(obj1.screens[0].name);
				console.log(obj1[0]);
				console.log(obj1[1]);
				console.log(obj1[2]);
				console.log(obj1.length);
				var newkey = "kgp";
				
					if(obj1.indexOf(newkey) == -1){
					console.log("not found");
					obj1.push(newkey);
					console.log(obj1);
					localStorage.setItem('session', JSON.stringify(obj1));
					
					var obj2 = JSON.parse(localStorage.getItem('session'));
					console.log(obj2);
					}
					else{
						console.log("Found");
					}
					console.log(obj2.length);
					if(Array.isArray(obj2)){
					console.log("obj is an array");
					}
			}
			else{
				document.getElementById("result").innerHTML = "sorry, browser does not support Web Storage";
			}
			
		</script>
		
    </body>

</html>
